\matrix [keyword list=a] {
  \node [index=1]; &
  \node [elements between]; &
  \node [index=i-1]; &
  \node (vkey) [key value={\key}{$\vkey$}]; &
  \node [index=i]; &
  \node [elements between]; &
  \node [index=n]; \\
};

\matrix [tuple=t, wrapper, element size=2 cm, below=2 of keyword list a] {
  \node (t1) {$\vkey$}; & \node [separator]; &
  \node (t2) [placeholder=5]; \\
};

\matrix at (t2) [keyword list=b, element=a] {
  \node [index=1]; &
  \node [elements between]; &
  \node [index=i-1]; &
  \node [index=i]; &
  \node [elements between]; &
  \node [index=n]; \\
};

\draw [->, out=270, in=90] (vkey.south) to (t1);

\bracetobrace
  {ai-1.south east}{a1.south west}
  {b1.north west}{bi-1.north east}

\bracetobrace
  {an.south east}{ai.south west}
  {bi-1.north east}{bn.north east}

