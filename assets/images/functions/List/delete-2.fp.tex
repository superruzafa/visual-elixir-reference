\matrix [list=a] {
  \node [index=1]; &
  \node [index=2]; &
  \node (a3) {\texttt{elem}}; &
  \node [elements between]; &
  \node (ai) {\texttt{elem}}; &
  \node [elements between]; &
  \node [index=n]; \\
};

\draw [enter iteration] (a1.north);
\draw [iteration] (a1.north) -- (a2.north);
\draw [iteration] (a2.north) -- (a3.north);

\matrix [list=b, element=a, below=2 of list a] {
  \node [index=1]; &
  \node [index=2]; &
  \node [elements between]; &
  \node (ai) {\texttt{elem}}; &
  \node [elements between]; &
  \node [index=n]; \\
};

\bracetobrace
    {a2.south east}{a1.south west}
    {b1.north west}{b2.north east}

\bracetobrace
    {an.south east}{a3.south east}
    {b2.north east}{bn.north east}

