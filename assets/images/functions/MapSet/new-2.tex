\matrix [list=a] {
    \node [index=1]; &
    \node [index=2]; &
    \node [index=3]; &
    \node [elements between]; &
    \node [index=i]; &
    \node [index=i+1]; &
    \node [elements between]; &
    \node [index=n]; \\
};

\foreach \i/\j in {1/1,2/1,3/2,i/1,i+1/3,n/m}{
    \node (fun\i) [fun, below=.5 of a\i.south];
    \draw [->] (a\i.south) -- (fun\i.in);
    \draw [->] (fun\i.out) -- +(0, -.5)
        node (b\i) [below] {$b_{\j}$};
}

\coordinate (bs) at ($ (b1)!.5!(bn) $);

\matrix [list=b, below=2 of bs] {
    \node [index=1]; &
    \node [index=2]; &
    \node [index=3]; &
    \node [elements between]; &
    \node [index=m]; \\
};

\node at ($ (bs)!.5!(list b.north) $) {$\Downarrow$};

